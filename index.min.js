function r(u){return u=function(r){if("("===r.charAt(0))for(var n=0,t=0;t<r.length;t++)if("("===r.charAt(t)?n++:")"===r.charAt(t)&&n--,0===n)return t!==r.length-1?r:r.substring(1,r.length-1);return r}(u),function(r){for(var n=r[0],t=1;t<r.length;t++)n=n.concat(r[t]);return n}(e("OR",u=u.replace(/[\s]+/g," ")).map((function(u){for(var c=e("AND",u),a=[],h=[],o=0;o<c.length;o++)t(c[o])?a.push(r(c[o])):h.push(c[o]);return a.push([h]),function(r){for(var t=[[]],e=0;e<r.length;e++)t=n(t,r[e]);return t}(a)})))}function n(r,n){var t=[];return r.forEach((function(r){n.forEach((function(n){var e;t.push((e=n,r.concat(e)))}))})),t}function t(r){return!!~r.search(/\(|\)/)}function e(r,n){for(var e=n.split(" "+r+" "),u=[],c=[],a=0;a<e.length;a++)if(t(e[a])||c.length>0){c.push(e[a]);var h=""+c;(h.match(/\(/g)||[]).length===(h.match(/\)/g)||[]).length&&(u.push(c.join(" "+r+" ")),c=[])}else u.push(e[a]);return u}export default(n,t={})=>{let e=0,u={};const c=n.replace(/['"](.+?)['"]/g,(r=>{const n=`$${e++}$`;return u[n]=r.replace(/['"]/g,""),n}));return Object.assign(t,r(c).reduce(((r,n,t)=>{var e;return r["filter"+(r=>0===r?"":r)(t)]=(e=n,Array.isArray(e)?e:[e]).map((r=>u[r])).join(","),r}),{}))};
